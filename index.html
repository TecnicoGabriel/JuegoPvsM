<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LA REBELI√ìN: PADRASTRO VS MAM√Å</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <audio id="bgMusic" loop></audio>

    <div id="startScreen">
        <div class="title-container">
            <h1 class="prize-text">¬°10 LUCAS AL TOP 1! ü§ë</h1>
            <h1>LA REBELI√ìN</h1>
            <h2 style="color:#0ff; margin-top:-10px;">PADRASTRO VS MAM√Å</h2>
        </div>

        <div class="setup-row">
            <div class="setup-box">
                <h3>JUGADOR 1</h3>
                <input type="text" id="p1Name" placeholder="Tu Nombre" maxlength="12">
                <label class="file-upload">Foto P1 <input type="file" id="p1Upload" accept="image/*"></label>
            </div>
            
            <div class="setup-box">
                <h3>DJ DE LA FIESTA</h3>
                <select id="musicGenre">
                    <option value="rock">Rock Peruano</option>
                    <option value="techno">Techno</option>
                    <option value="cumbia">Cumbia</option>
                    <option value="reggaeton">Reggaeton</option>
                    <option value="salsa">Salsa</option>
                    <option value="chicha">Chicha</option>
                    <option value="random">Aleatorio</option>
                </select>
            </div>
        </div>

        <div class="mode-select">
            <button onclick="setMode(1)" class="active" id="btn1P">1 JUGADOR</button>
            <button onclick="setMode(2)" id="btn2P">2 JUGADORES (PC)</button>
        </div>
        
        <div class="setup-box hidden" id="p2Setup">
            <h3>JUGADOR 2</h3>
            <input type="text" id="p2Name" placeholder="Nombre P2">
            <label class="file-upload">Foto P2 <input type="file" id="p2Upload" accept="image/*"></label>
        </div>

        <button onclick="openGuide()" style="background: #ffd700; color: black; margin-top: 15px;">üìò GU√çA DE ARMAS</button>
        <button onclick="iniciarJuego()" class="start-btn">¬°A PELEAR!</button>
    </div>

    <div id="uiLayer" class="hidden">
        <div id="scoreBoard">Puntos: 0</div>
        <div class="player-stats">
            <div id="p1Stats" style="color:#0ff">P1: 100%</div>
            <div id="p2Stats" style="color:#f0f; display:none;">P2: 100%</div>
        </div>
    </div>

    <div id="guideScreen" class="hidden">
        <div class="guide-content">
            <h2>ARMAS Y ENEMIGOS</h2>
            <div class="guide-grid">
                <div class="guide-item"><img src="assets/images/poder_metralleta.png"><div><b>Metralleta:</b> R√°faga x4</div></div>
                <div class="guide-item"><img src="assets/images/poder_canon.png"><div><b>Ca√±√≥n:</b> Atraviesa todo</div></div>
                <div class="guide-item"><img src="assets/images/poder_spread.png"><div><b>Spread:</b> Tiro Triple</div></div>
                <div class="guide-item"><img src="assets/images/ayudante.png"><div><b>Ayuda:</b> Nave aliada</div></div>
                <div class="guide-item"><img src="assets/images/poder_vida_full.png"><div><b>Vida:</b> Cura 100%</div></div>
                <div class="guide-item enemy-item"><img src="assets/images/enemigo_tri.png"><div><b>Tri-Bot:</b> Dispara x3</div></div>
            </div>
            <button onclick="closeGuide()">CERRAR</button>
        </div>
    </div>

    <div id="gameOverScreen" class="hidden">
        <h1 style="color: red; font-size: 40px;">FIN DEL JUEGO</h1>
        <h2 id="finalScore">Puntos: 0</h2>
        
        <div class="leaderboard-box">
            <h3>üèÜ TOP 5 MUNDIAL üèÜ</h3>
            <ul id="leaderboardListOver"><li>Cargando...</li></ul>
        </div>

        <div class="end-buttons">
            <button onclick="location.reload()" class="retry-btn">üîÑ REINTENTAR</button>
            <button onclick="goHome()" class="home-btn">üè† INICIO</button>
        </div>
    </div>

    <div id="pauseScreen" class="hidden">
        <h1>PAUSA</h1>
        <button onclick="togglePause()">CONTINUAR</button>
        <button onclick="goHome()">SALIR</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="js/game.js"></script>
</body>
</html>